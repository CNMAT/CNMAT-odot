<!-- /* * * *
      * OSC <===> JSON // Node-Red Module
      *
      * Written by Ilya Rostovtsev The Center for New Music and Audio Technologies,
      * University of California, Berkeley.  Copyright (c) 2014-ll, The Regents of
      * the University of California (Regents). 
      *
      * Permission to use, copy, modify, distribute, and distribute modified versions
      * of this software and its documentation without fee and without a signed
      * licensing agreement, is hereby granted, provided that the above copyright
      * notice, this paragraph and the following two paragraphs appear in all copies,
      * modifications, and distributions.
      *
      * IN NO EVENT SHALL REGENTS BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,
      * SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS, ARISING
      * OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF REGENTS HAS
      * BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      * 
      * REGENTS SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
      * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
      * PURPOSE. THE SOFTWARE AND ACCOMPANYING DOCUMENTATION, IF ANY, PROVIDED
      * HEREUNDER IS PROVIDED "AS IS". REGENTS HAS NO OBLIGATION TO PROVIDE
      * MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
      * * * * -->

<!-- o_parse node -->
<script type="text/x-red" data-template-name="o_parse">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="o_parse">
    <p>Converts a textual representation of OSC to a serialized OSC bundle</p>
    <p>INPUT: textual representation of osc:</p>
       <h5>Example:</h5>
       <p><pre>/an_integer 7 
/a_float 8.2
/a_string "this is my string" 
/mixed_array 1 2.2 "string" 8.7
/expression "/result = /an_integer + /a_float;"</pre>
       (Note that the line-breaks between addresses are mandatory.)</p>
       <p>Works best with the <code>Template</code> object for assigning JavaScript variables to osc addresses.
       Given js variables named foo and bar, the following template will convert them to OSC:
       <pre>/foo {{foo}}
/bar {{bar}}</pre>
       (Please see the info pane for <code>Template</code> for more information.)
    </p>
    <p>OUTPUT: a message with <code>.payload</code> property containing a NODE BUFFER with the serialized OSC bundle.</p>    
</script>

<script type="text/javascript">
    RED.nodes.registerType('o_parse',{
        color:"#B0C6D9",
        category: 'function',   
        defaults: {             
            name: {value:"o.parse"},   
            topic: {value:"", required:false}
        },
        inputs:1,               
        outputs:1,              
        icon: "cnmat.png",    
        label: function() {    
            return this.name||this.topic||"o.parse";
        },
        labelStyle: function() { // sets the class to apply to the label
            return this.name?"node_label_italic":"";
        }
    });
</script>