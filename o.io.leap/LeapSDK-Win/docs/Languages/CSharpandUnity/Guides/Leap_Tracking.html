<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.9.1: http://docutils.sourceforge.net/" />
<title>Tracking Hands, Fingers, and Tools</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7434 2012-05-11 21:06:27Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { /* line numbers */
  color: grey;
}

.code {
  background-color: #eeeeee
}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="tracking-hands-fingers-and-tools">
<h1 class="title">Tracking Hands, Fingers, and Tools</h1>

<p>Hands, fingers, and tools are the basic entities tracked by the Leap Motion system. This article discusses the details of gettting and using the objects representing these entities.</p>
<div class="contents topic" id="topics">
<p class="topic-title first">Topics:</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id1">Overview</a></li>
<li><a class="reference internal" href="#hand-and-pointable-lists" id="id2">Hand, and Pointable Lists</a></li>
<li><a class="reference internal" href="#hands" id="id3">Hands</a><ul>
<li><a class="reference internal" href="#getting-the-hand-characteristics" id="id4">Getting the Hand Characteristics</a></li>
<li><a class="reference internal" href="#getting-the-fingers-and-tools" id="id5">Getting the Fingers and Tools</a></li>
<li><a class="reference internal" href="#computing-the-hand-orientation" id="id6">Computing the Hand Orientation</a></li>
<li><a class="reference internal" href="#transforming-finger-coordinates-into-the-hand-s-frame-of-reference" id="id7">Transforming Finger Coordinates into the Hand's Frame of Reference</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pointables" id="id8">Pointables</a><ul>
<li><a class="reference internal" href="#converting-a-pointable-object-to-a-finger-or-tool" id="id9">Converting a Pointable Object to a Finger or Tool</a></li>
<li><a class="reference internal" href="#calculating-the-position-of-the-base-of-a-finger" id="id10">Calculating the Position of the Base of a Finger</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h1><a class="toc-backref" href="#id1">Overview</a></h1>
<p>The Leap API defines a class representing each of the basic tracked objects.</p>
<!-- .. image:: images/TrackingModel.png -->
<p>The Frame object provides access to lists of hands, fingers, and tools. Fingers and tools are examples of pointable objects and can be treated together using the PointableList or separately using the FingerList and ToolList classes. Hand objects provide access to their fingers and tools (both together in a PointableList or separately).</p>
<p>The physical characteristics of hands, fingers, and tools are reported in reference to the Leap coordinate system (measured in units of millimeters). The Leap SDK provides a Vector class to describe points and directions. The Vector class provides several useful math functions for working with vectors.</p>
</div>
<div class="section" id="hand-and-pointable-lists">
<h1><a class="toc-backref" href="#id2">Hand, and Pointable Lists</a></h1>
<p>The list classes all have a similar structure. They are designed to act like vector-style arrays and support iterators. You cannot remove or alter the member objects of lists received from the Leap API, but you can combine lists of the same object type.</p>
<p>To use an iterator with one of these lists:</p>
<pre class="code csharp literal-block">
    <span class="k">foreach</span> <span class="p">(</span><span class="n">Hand</span> <span class="n">hand</span> <span class="k">in</span> <span class="n">handList</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="n">hand</span><span class="p">.</span><span class="n">ToString</span> <span class="p">());</span>
    <span class="p">}</span>
</pre>
<p>The Hand, Pointable, Finger, and Tool lists define additional functions for getting members of the list based on their relative position within the Leap coordinate system. These functions include <cite>leftmost()</cite>, <cite>rightmost()</cite>, and <cite>frontmost()</cite>. The following snippet illustrates a few ways to use these functions:</p>
<pre class="code csharp literal-block">
    <span class="n">Finger</span> <span class="n">farLeft</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Fingers</span><span class="p">.</span><span class="n">Leftmost</span><span class="p">;</span>
    <span class="n">Finger</span> <span class="n">mostForwardOnHand</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Hands</span> <span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Fingers</span><span class="p">.</span><span class="n">Frontmost</span><span class="p">;</span>
    <span class="n">Tool</span> <span class="n">rightTool</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Tools</span><span class="p">.</span><span class="n">Rightmost</span><span class="p">;</span>
</pre>
<p>A more complex example calculates the walls of a bounding box containing all detected pointable objects. This example defines its own functions for getting the top, bottom, and rear pointables since these are not included in the API:</p>
<pre class="code csharp literal-block">
    <span class="kt">float</span> <span class="n">left</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Pointables</span><span class="p">.</span><span class="n">Leftmost</span><span class="p">.</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">right</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Pointables</span><span class="p">.</span><span class="n">Rightmost</span><span class="p">.</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">front</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Pointables</span><span class="p">.</span><span class="n">Frontmost</span><span class="p">.</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">z</span><span class="p">;</span>

    <span class="kt">float</span> <span class="n">back</span> <span class="p">=</span> <span class="n">backmost</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">Pointables</span><span class="p">).</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">z</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">top</span> <span class="p">=</span> <span class="n">topmost</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">Pointables</span><span class="p">).</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">bottom</span> <span class="p">=</span> <span class="n">bottommost</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">Pointables</span><span class="p">).</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>

    <span class="n">Pointable</span> <span class="nf">backmost</span><span class="p">(</span><span class="n">PointableList</span> <span class="n">pointables</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pointables</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">Pointable</span><span class="p">.</span><span class="n">Invalid</span><span class="p">;</span>
        <span class="n">Pointable</span> <span class="n">backmost</span> <span class="p">=</span> <span class="n">pointables</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">p</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">p</span> <span class="p">&lt;</span> <span class="n">pointables</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">p</span><span class="p">++</span> <span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">pointables</span><span class="p">[</span><span class="n">p</span><span class="p">].</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">z</span> <span class="p">&gt;</span> <span class="n">backmost</span><span class="p">.</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">z</span><span class="p">)</span>
                <span class="n">backmost</span> <span class="p">=</span> <span class="n">pointables</span><span class="p">[</span><span class="n">p</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">backmost</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">Pointable</span> <span class="nf">topmost</span><span class="p">(</span><span class="n">PointableList</span> <span class="n">pointables</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pointables</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">Pointable</span><span class="p">.</span><span class="n">Invalid</span><span class="p">;</span>
        <span class="n">Pointable</span> <span class="n">topmost</span> <span class="p">=</span> <span class="n">pointables</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">p</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">p</span> <span class="p">&lt;</span> <span class="n">pointables</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">p</span><span class="p">++</span> <span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">pointables</span><span class="p">[</span><span class="n">p</span><span class="p">].</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">y</span> <span class="p">&gt;</span> <span class="n">topmost</span><span class="p">.</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
                <span class="n">topmost</span> <span class="p">=</span> <span class="n">pointables</span><span class="p">[</span><span class="n">p</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">topmost</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">Pointable</span> <span class="nf">bottommost</span><span class="p">(</span><span class="n">PointableList</span> <span class="n">pointables</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">pointables</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">Pointable</span><span class="p">.</span><span class="n">Invalid</span><span class="p">;</span>
        <span class="n">Pointable</span> <span class="n">bottommost</span> <span class="p">=</span> <span class="n">pointables</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">p</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span> <span class="n">p</span> <span class="p">&lt;</span> <span class="n">pointables</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">p</span><span class="p">++</span> <span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">pointables</span><span class="p">[</span><span class="n">p</span><span class="p">].</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">y</span> <span class="p">&lt;</span> <span class="n">bottommost</span><span class="p">.</span><span class="n">TipPosition</span><span class="p">.</span><span class="n">y</span> <span class="p">)</span>
                <span class="n">bottommost</span> <span class="p">=</span> <span class="n">pointables</span><span class="p">[</span><span class="n">p</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">bottommost</span><span class="p">;</span>
    <span class="p">}</span>
</pre>
</div>
<div class="section" id="hands">
<h1><a class="toc-backref" href="#id3">Hands</a></h1>
<p>The Hand class represents a physical hand detected by the Leap. A Hand object provides access to lists of its pointables as well as attributes describing the hand position, orientation, and movement. Get Hand objects from a Frame:</p>
<pre class="code csharp literal-block">
    <span class="n">Frame</span> <span class="n">frame</span> <span class="p">=</span> <span class="n">controller</span><span class="p">.</span><span class="n">Frame</span><span class="p">();</span> <span class="c1">// controller is a Controller object
</span>    <span class="n">HandList</span> <span class="n">hands</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Hands</span><span class="p">;</span>
    <span class="n">Hand</span> <span class="n">firstHand</span> <span class="p">=</span> <span class="n">hands</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
</pre>
<p>Or, if you know the ID from a previous frame:</p>
<pre class="code csharp literal-block">
   <span class="n">Hand</span> <span class="n">knownHand</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Hand</span><span class="p">(</span><span class="n">handID</span><span class="p">);</span>
</pre>
<p>You can also get hands by their relative positions in the frame:</p>
<pre class="code csharp literal-block">
    <span class="n">Frame</span> <span class="n">frame</span> <span class="p">=</span> <span class="n">controller</span><span class="p">.</span><span class="n">Frame</span><span class="p">();</span> <span class="c1">// controller is a Controller object
</span>    <span class="n">HandList</span> <span class="n">hands</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Hands</span><span class="p">;</span>

    <span class="n">Hand</span> <span class="n">leftmost</span> <span class="p">=</span> <span class="n">hands</span><span class="p">.</span><span class="n">Leftmost</span><span class="p">;</span>
    <span class="n">Hand</span> <span class="n">rightmost</span> <span class="p">=</span> <span class="n">hands</span><span class="p">.</span><span class="n">Rightmost</span><span class="p">;</span>
    <span class="n">Hand</span> <span class="n">frontmost</span> <span class="p">=</span> <span class="n">hands</span><span class="p">.</span><span class="n">Frontmost</span><span class="p">;</span>
</pre>
<p>Note that the the <tt class="docutils literal">leftmost()</tt> and <tt class="docutils literal">rightmost()</tt> functions only identify which hand is farthest to the left or right. The functions do not identify which hand is the right or left hand.</p>
<div class="section" id="getting-the-hand-characteristics">
<h2><a class="toc-backref" href="#id4">Getting the Hand Characteristics</a></h2>
<p>A hand is described by its position, orientation, and motion.</p>
<p>The hand's position is given by its palm position attribute, which provides a vector containing the 3-dimensional coordinates of the palm center point in millimeters from the Leap Motion origin. The hand's orientation is given by two vectors: the direction, which points from the palm center towards the fingers, and the palm normal, which points out of the palm, perpendicular to the plane of the hand.</p>
<p>The movement of the hand is given by the velocity attribute, which is a vector providing the instantaneous motion of the hand in mm/s. You can also get motion factors that translate how a hand has moved between two given frames into translation, rotation, and scaling values.</p>
<p>The following code snippet illustrates how to get a Hand object from a frame and access its basic attributes:</p>
<pre class="code csharp literal-block">
    <span class="n">Hand</span> <span class="n">hand</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Hands</span><span class="p">.</span><span class="n">Rightmost</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">position</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">PalmPosition</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">velocity</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">PalmVelocity</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">direction</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">Direction</span><span class="p">;</span>
</pre>
</div>
<div class="section" id="getting-the-fingers-and-tools">
<h2><a class="toc-backref" href="#id5">Getting the Fingers and Tools</a></h2>
<p>You can get the fingers and tools associated with a hand as a list or individually using an ID obtained in a previous frame.</p>
<p>By list:</p>
<pre class="code csharp literal-block">
    <span class="c1">// hand is a Hand object
</span>    <span class="n">PointableList</span> <span class="n">pointables</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">Pointables</span><span class="p">;</span> <span class="c1">// Both fingers and tools
</span>    <span class="n">FingerList</span> <span class="n">fingers</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">Fingers</span><span class="p">;</span>
    <span class="n">ToolList</span> <span class="n">tools</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">Tools</span><span class="p">;</span>
</pre>
<p>By ID from a previous frame:</p>
<pre class="code csharp literal-block">
    <span class="n">Pointable</span> <span class="n">knownPointable</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">Pointable</span><span class="p">(</span><span class="n">pointableID</span><span class="p">);</span>
</pre>
<p>To get a finger or tool by relative position within the Leap field of view, use the right-, left- and frontmost functions of the matching list class:</p>
<pre class="code csharp literal-block">
    <span class="c1">// hand is a Hand object
</span>    <span class="n">Pointable</span> <span class="n">leftPointable</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">Pointables</span><span class="p">.</span><span class="n">Leftmost</span><span class="p">;</span>
    <span class="n">Finger</span> <span class="n">rightFinger</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">Fingers</span><span class="p">.</span><span class="n">Rightmost</span><span class="p">;</span>
    <span class="n">Tool</span> <span class="n">frontTool</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">Tools</span><span class="p">.</span><span class="n">Frontmost</span><span class="p">;</span>
</pre>
<p>Note that these functions are relative to the Leap Motion origin, not to the hand itself. To get the fingers relative to the hand, you can use the Leap Matrix class to transform the finger positions into the hands frame of reference.</p>
</div>
<div class="section" id="computing-the-hand-orientation">
<h2><a class="toc-backref" href="#id6">Computing the Hand Orientation</a></h2>
<p>You can compute the hand orientation angles using the Hand direction and normal vectors. The Vector class defines functions for getting the pitch (angle around the x-axis), yaw (angle around the y-axis), and roll (angle around the z-axis):</p>
<pre class="code csharp literal-block">
    <span class="kt">float</span> <span class="n">pitch</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">Pitch</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">yaw</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">Yaw</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">roll</span> <span class="p">=</span> <span class="n">hand</span><span class="p">.</span><span class="n">PalmNormal</span><span class="p">.</span><span class="n">Roll</span><span class="p">;</span>
</pre>
<p>Note that the roll function only provides the expected angle when used with a normal vector.</p>
</div>
<div class="section" id="transforming-finger-coordinates-into-the-hand-s-frame-of-reference">
<h2><a class="toc-backref" href="#id7">Transforming Finger Coordinates into the Hand's Frame of Reference</a></h2>
<p>Sometimes it is useful to obtain the coordinates of the fingers of a hand with respect to the hand's frame of reference. This lets you sort the fingers spatially and can simplify analysis of finger positions. You can create a transform matrix using the Leap Matrix class to transform the finger position and direction coordinates. The hand frame of reference can be usefully defined with the hand's direction and palm normal vectors, with the third axis defined by the cross product between the two. This puts the x-axis sideways across the hand, the z-axis pointing forward, and the y-axis parallel with the palm normal.</p>
<pre class="code csharp literal-block">
    <span class="n">Frame</span> <span class="n">frame</span> <span class="p">=</span> <span class="n">leap</span><span class="p">.</span><span class="n">Frame</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">h</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">h</span> <span class="p">&lt;</span> <span class="n">frame</span><span class="p">.</span><span class="n">Hands</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">h</span><span class="p">++</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Hand</span> <span class="n">leapHand</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Hands</span><span class="p">[</span><span class="n">h</span><span class="p">];</span>

        <span class="n">Vector</span> <span class="n">handXBasis</span> <span class="p">=</span>  <span class="n">leapHand</span><span class="p">.</span><span class="n">PalmNormal</span><span class="p">.</span><span class="n">Cross</span><span class="p">(</span><span class="n">leapHand</span><span class="p">.</span><span class="n">Direction</span><span class="p">).</span><span class="n">Normalized</span><span class="p">;</span>
        <span class="n">Vector</span> <span class="n">handYBasis</span> <span class="p">=</span> <span class="p">-</span><span class="n">leapHand</span><span class="p">.</span><span class="n">PalmNormal</span><span class="p">;</span>
        <span class="n">Vector</span> <span class="n">handZBasis</span> <span class="p">=</span> <span class="p">-</span><span class="n">leapHand</span><span class="p">.</span><span class="n">Direction</span><span class="p">;</span>
        <span class="n">Vector</span> <span class="n">handOrigin</span> <span class="p">=</span>  <span class="n">leapHand</span><span class="p">.</span><span class="n">PalmPosition</span><span class="p">;</span>
        <span class="n">Matrix</span> <span class="n">handTransform</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">handXBasis</span><span class="p">,</span> <span class="n">handYBasis</span><span class="p">,</span> <span class="n">handZBasis</span><span class="p">,</span> <span class="n">handOrigin</span><span class="p">);</span>
        <span class="n">handTransform</span> <span class="p">=</span> <span class="n">handTransform</span><span class="p">.</span><span class="n">RigidInverse</span><span class="p">();</span>

        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">f</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">f</span> <span class="p">&lt;</span> <span class="n">leapHand</span><span class="p">.</span><span class="n">Fingers</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">f</span><span class="p">++</span> <span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Finger</span> <span class="n">leapFinger</span> <span class="p">=</span> <span class="n">leapHand</span><span class="p">.</span><span class="n">Fingers</span><span class="p">[</span><span class="n">f</span><span class="p">];</span>
            <span class="n">Vector</span> <span class="n">transformedPosition</span> <span class="p">=</span> <span class="n">handTransform</span><span class="p">.</span><span class="n">TransformPoint</span><span class="p">(</span><span class="n">leapFinger</span><span class="p">.</span><span class="n">TipPosition</span><span class="p">);</span>
            <span class="n">Vector</span> <span class="n">transformedDirection</span> <span class="p">=</span> <span class="n">handTransform</span><span class="p">.</span><span class="n">TransformDirection</span><span class="p">(</span><span class="n">leapFinger</span><span class="p">.</span><span class="n">Direction</span><span class="p">);</span>
            <span class="c1">// Do something with the transformed fingers
</span>        <span class="p">}</span>
    <span class="p">}</span>
</pre>
</div>
</div>
<div class="section" id="pointables">
<h1><a class="toc-backref" href="#id8">Pointables</a></h1>
<p>Pointable objects represent fingers and tools — i.e. things that can be pointed. You can get the fingers and tools associated with a particular hand from the Hand object. You can also get all detected pointables from a Frame object. Pointables are not necessarily associated with a Hand object — the physical hand itself may be out of the field of view or blocked by another hand. Thus the list of pointables from the frame can include fingers and tools not found in any list associated with a hand.</p>
<p>Pointable objects have many attributes describing the characteristics of the represented finger or tool:</p>
<ul class="simple">
<li>Tip position — the instantaneous position in mm from the Leap Motion origin.</li>
<li>Tip velocity — the instantaneous velocity in mm/s.</li>
<li>Stabilized tip position — the position filtered and stabilized using velocity and past positions.</li>
<li>Direction — the current pointing direction vector.</li>
<li>Length — the apparent length of the finger or tool.</li>
<li>Width — the average width.</li>
<li>Touch distance — the normalized distance from the virtual touch plane.</li>
<li>Touch zone — the pointable's current relation to the virtual touch plane.</li>
</ul>
<p>The following example illustrates how to get a pointable object from a frame and access its basic characteristics:</p>
<pre class="code csharp literal-block">
    <span class="n">Pointable</span> <span class="n">pointable</span> <span class="p">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">Pointables</span><span class="p">.</span><span class="n">Frontmost</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">direction</span> <span class="p">=</span> <span class="n">pointable</span><span class="p">.</span><span class="n">Direction</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">length</span> <span class="p">=</span> <span class="n">pointable</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">width</span> <span class="p">=</span> <span class="n">pointable</span><span class="p">.</span><span class="n">Width</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">stabilizedPosition</span> <span class="p">=</span> <span class="n">pointable</span><span class="p">.</span><span class="n">StabilizedTipPosition</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">position</span> <span class="p">=</span> <span class="n">pointable</span><span class="p">.</span><span class="n">TipPosition</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">speed</span> <span class="p">=</span> <span class="n">pointable</span><span class="p">.</span><span class="n">TipVelocity</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">touchDistance</span> <span class="p">=</span> <span class="n">pointable</span><span class="p">.</span><span class="n">TouchDistance</span><span class="p">;</span>
    <span class="n">Pointable</span><span class="p">.</span><span class="n">Zone</span> <span class="n">zone</span> <span class="p">=</span> <span class="n">pointable</span><span class="p">.</span><span class="n">TouchZone</span><span class="p">;</span>
</pre>
<div class="section" id="converting-a-pointable-object-to-a-finger-or-tool">
<h2><a class="toc-backref" href="#id9">Converting a Pointable Object to a Finger or Tool</a></h2>
<p>To convert a Pointable object to its proper Finger or Tool subclass, use the appropriate Finger or Tool constructor (one of the few times that you should use the constructor for a Leap class).</p>
<pre class="code csharp literal-block">
    <span class="k">if</span> <span class="p">(</span><span class="n">pointable</span><span class="p">.</span><span class="n">IsTool</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Tool</span> <span class="n">tool</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Tool</span><span class="p">(</span><span class="n">pointable</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">Finger</span> <span class="n">finger</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Finger</span><span class="p">(</span><span class="n">pointable</span><span class="p">);</span>
    <span class="p">}</span>
</pre>
</div>
<div class="section" id="calculating-the-position-of-the-base-of-a-finger">
<h2><a class="toc-backref" href="#id10">Calculating the Position of the Base of a Finger</a></h2>
<p>If you need to calculate the position of the base of the finger, you can use the finger tip position and direction as follows:</p>
<pre class="code csharp literal-block">
    <span class="n">Vector</span> <span class="n">basePosition</span> <span class="p">=</span> <span class="p">-</span><span class="n">pointable</span><span class="p">.</span><span class="n">Direction</span> <span class="p">*</span> <span class="n">pointable</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
    <span class="n">basePosition</span> <span class="p">+=</span> <span class="n">pointable</span><span class="p">.</span><span class="n">TipPosition</span><span class="p">;</span>
</pre>
</div>
</div>
</div>
</body>
</html>
