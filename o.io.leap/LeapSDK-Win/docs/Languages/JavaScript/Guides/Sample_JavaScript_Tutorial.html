<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.9.1: http://docutils.sourceforge.net/" />
<title>Understanding the JavaScript Sample Application</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7434 2012-05-11 21:06:27Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { /* line numbers */
  color: grey;
}

.code {
  background-color: #eeeeee
}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="understanding-the-javascript-sample-application">
<h1 class="title">Understanding the JavaScript Sample Application</h1>

<p>This article discusses the JavaScript sample application included with the Leap SDK. After reading this article, you should be ready to access Leap hand tracking data from your own Web applications.</p>
<div class="contents topic" id="topics">
<p class="topic-title first">Topics:</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id1">Overview</a></li>
<li><a class="reference internal" href="#javascript-client-library" id="id2">JavaScript client library</a></li>
<li><a class="reference internal" href="#setting-up-the-page" id="id3">Setting up the page</a></li>
<li><a class="reference internal" href="#setting-up-the-event-loop" id="id4">Setting up the event loop</a></li>
<li><a class="reference internal" href="#accessing-tracking-data" id="id5">Accessing tracking data</a><ul>
<li><a class="reference internal" href="#frame-data" id="id6">Frame data</a></li>
<li><a class="reference internal" href="#motion-data" id="id7">Motion data</a></li>
<li><a class="reference internal" href="#hand-data" id="id8">Hand data</a></li>
<li><a class="reference internal" href="#finger-and-tool-data" id="id9">Finger and Tool data</a></li>
<li><a class="reference internal" href="#gesture-data" id="id10">Gesture data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-the-sample" id="id11">Running the sample</a></li>
</ul>
</div>
<p>In the Leap SDK folder, you can find the following file used for this article:</p>
<ul class="simple">
<li><tt class="docutils literal">LeapSDK/samples/Sample.html</tt> — JavaScript sample application</li>
</ul>
<p>You will also need the Leap JavaScript client library available from <a class="reference external" href="https://github.com/leapmotion/leapjs">Leap Motion's LeapJS repository on GitHub</a>.</p>
<p>Also note that you can find the <a class="reference external" href="http://leapmotion.github.com/leapjs/">Leap JavaScript API reference documentation on GitHub</a>.</p>
<div class="section" id="overview">
<h1><a class="toc-backref" href="#id1">Overview</a></h1>
<p>In a nutshell, the Leap motion tracking device detects and tracks hands and fingers placed within its field of view. The Leap captures this data one <em>frame</em> at a time. Web applications can use the Leap application WebSocket server and the JavaScript API to access this data. The Leap sends tracking information through the socket connection as a JSON formated message. The JavaScript API takes the JSON message and evaluates it into proper objects.</p>
<p>The sample application demonstrates how to use the Leap JavaScript API. The example is contained in a single Web page, <tt class="docutils literal">Sample.html</tt>. The application displays several properties from the key tracking data objects in the Leap API, including:</p>
<ul class="simple">
<li><tt class="docutils literal">Frame</tt> — contains a set of hand and pointable tracking data</li>
<li><tt class="docutils literal">Hand</tt> — contains tracking data for a detected hand</li>
<li><tt class="docutils literal">Pointable</tt> — contains tracking data for a detected finger or tool</li>
<li><tt class="docutils literal">Gesture</tt> — represents a recognized gesture</li>
</ul>
<p>For more detailed information about these classes, pleases refer to the <a class="reference external" href="http://leapmotion.github.com/leapjs/">Leap JavaScript API reference documentation on GitHub</a>.</p>
</div>
<div class="section" id="javascript-client-library">
<h1><a class="toc-backref" href="#id2">JavaScript client library</a></h1>
<p>The Leap JavaScript client library is available from <a class="reference external" href="https://github.com/leapmotion/leapjs">Leap Motion's LeapJS repository on GitHub</a>. The library handles the connection to the Leap application and passes frames of tracking data to your application. LeapJS is an open-source project and distributed separately from the main Leap SDK. We encourage community contributions to this library.</p>
</div>
<div class="section" id="setting-up-the-page">
<h1><a class="toc-backref" href="#id3">Setting up the page</a></h1>
<p>To use the JavaScript API, you must include the <tt class="docutils literal">leap.js</tt> file (or the minified version, <tt class="docutils literal">leap.min.js</tt>). In the <tt class="docutils literal">Sample.html</tt> file, I use a simple HTML structure to display the Leap data and include the <tt class="docutils literal">leap.js</tt> file in the usual way using script tags:</p>
<pre class="code html literal-block">
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Leap JavaScript Sample<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;leap.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script&gt;</span><span class="err">// JavaScript code goes here</span><span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body</span> <span class="na">onload=</span><span class="s">&quot;checkLibrary()&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Leap JavaScript Sample<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;main&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h3&gt;</span>Frame data:<span class="nt">&lt;/h3&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;frameData&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;clear:both;&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;h3&gt;</span>Hand data:<span class="nt">&lt;/h3&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;handData&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;clear:both;&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;h3&gt;</span>Finger and tool data:<span class="nt">&lt;/h3&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;pointableData&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;clear:both;&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
      <span class="nt">&lt;h3&gt;</span>Gesture data:<span class="nt">&lt;/h3&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;gestureData&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre>
<p>To keep things simple, all the example code in the example is in the main HTML file.</p>
</div>
<div class="section" id="setting-up-the-event-loop">
<h1><a class="toc-backref" href="#id4">Setting up the event loop</a></h1>
<p>Since the Leap provides data continuously, you need to set up an event loop to handle individual frames of data. You can either set up a loop that handles the data as the Leap produces each frame, or you can set up a loop that handles the data when your application is ready to do something with it. The Leap JavaScript client library supports both options.</p>
<p>In this example, I demonstrate the second method, since there is no need in this app to process the data faster than the browser can draw it to the screen. The Leap API provides the <tt class="docutils literal">loop()</tt> function, which invokes a callback function you provide whenever the browser is ready to draw. In this sample, the callback is an anonymous function that prints out the tracking data to the body of the web page. The first parameter of the <tt class="docutils literal">loop()</tt> function contains optional parameters that are passed to the Controller objet. This is the skeleton of the function:</p>
<pre class="code js literal-block">
<span class="c1">// Setup Leap loop with frame callback function
</span><span class="kd">var</span> <span class="nx">controllerOptions</span> <span class="o">=</span> <span class="p">{</span><span class="nx">enableGestures</span><span class="o">:</span> <span class="kc">true</span><span class="p">};</span>

<span class="nx">Leap</span><span class="p">.</span><span class="nx">loop</span><span class="p">(</span><span class="nx">controllerOptions</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Body of callback function
</span><span class="p">})</span>
</pre>
<p>Internally, <tt class="docutils literal">Leap.loop()</tt> uses the browser's <tt class="docutils literal">requestAnimationFrame()</tt> feature and passes the latest frame of Leap data on each browser animation cycle.</p>
</div>
<div class="section" id="accessing-tracking-data">
<h1><a class="toc-backref" href="#id5">Accessing tracking data</a></h1>
<p>The Frame object passed to the <tt class="docutils literal">loop()</tt> callback function as the <tt class="docutils literal">frame</tt> parameter is root of the tracking data model and provides access to all the tracked objects, like hands, fingers, and tools. To display the data, I create a string of HTML containing the object properties and assign the string to a <tt class="docutils literal">div</tt> element on the page.</p>
<div class="section" id="frame-data">
<h2><a class="toc-backref" href="#id6">Frame data</a></h2>
<p>Displaying the basic frame data is a simple matter of constructing a string using the Frame object properties:</p>
<pre class="code js literal-block">
<span class="kd">var</span> <span class="nx">frameString</span> <span class="o">=</span> <span class="s2">&quot;Frame ID: &quot;</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">id</span>  <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span>
                <span class="o">+</span> <span class="s2">&quot;Timestamp: &quot;</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">timestamp</span> <span class="o">+</span> <span class="s2">&quot; &amp;micro;s&lt;br /&gt;&quot;</span>
                <span class="o">+</span> <span class="s2">&quot;Hands: &quot;</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">hands</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span>
                <span class="o">+</span> <span class="s2">&quot;Fingers: &quot;</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">fingers</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span>
                <span class="o">+</span> <span class="s2">&quot;Tools: &quot;</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">tools</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span>
                <span class="o">+</span> <span class="s2">&quot;Gestures: &quot;</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">gestures</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
</pre>
</div>
<div class="section" id="motion-data">
<h2><a class="toc-backref" href="#id7">Motion data</a></h2>
<p>Motion data, which the Leap provides for the scene as a whole and for each hand individually, requires a frame to serve as the basis for comparison. In this example, I store a reference to the previous frame (in a variable named <tt class="docutils literal">previousFrame</tt>) and pass that to each motion function. The example displays the Frame translation, rotation axis, rotation angle, and scale factor; there are a few other methods available as well. The motion functions of the Frame object describe the motion of the overall scene. The example displays the motion data as follows:</p>
<pre class="code js literal-block">
<span class="c1">// Frame motion factors
</span><span class="k">if</span> <span class="p">(</span><span class="nx">previousFrame</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">translation</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">translation</span><span class="p">(</span><span class="nx">previousFrame</span><span class="p">);</span>
  <span class="nx">frameString</span> <span class="o">+=</span> <span class="s2">&quot;Translation: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">translation</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm &lt;br /&gt;&quot;</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">rotationAxis</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">rotationAxis</span><span class="p">(</span><span class="nx">previousFrame</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">rotationAngle</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">rotationAngle</span><span class="p">(</span><span class="nx">previousFrame</span><span class="p">);</span>
  <span class="nx">frameString</span> <span class="o">+=</span> <span class="s2">&quot;Rotation axis: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">rotationAxis</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
  <span class="nx">frameString</span> <span class="o">+=</span> <span class="s2">&quot;Rotation angle: &quot;</span> <span class="o">+</span> <span class="nx">rotationAngle</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; radians&lt;br /&gt;&quot;</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">scaleFactor</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">scaleFactor</span><span class="p">(</span><span class="nx">previousFrame</span><span class="p">);</span>
  <span class="nx">frameString</span> <span class="o">+=</span> <span class="s2">&quot;Scale factor: &quot;</span> <span class="o">+</span> <span class="nx">scaleFactor</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>When you access a value that represents a vector, the Leap JavaScript API expresses the vector as a standard Array object containing three elements. This is the case with the result of the <tt class="docutils literal">translation()</tt> function, above. The element, <tt class="docutils literal">translation[0]</tt>, for example represents the <cite>x</cite>-coordinate of the vector. For convenience, I have defined the function <tt class="docutils literal">vectorToString()</tt> to convert a vector to a human-readable format.</p>
<p>At the end of the callback function, remember to assign the current frame to the <tt class="docutils literal">previousFrame</tt> variable to serve as the point of reference for motions in the next frame.</p>
</div>
<div class="section" id="hand-data">
<h2><a class="toc-backref" href="#id8">Hand data</a></h2>
<p>Hands can be accessed from the Frame object using the <tt class="docutils literal">hands</tt> property, which is an array. The example code iterates through the list of hands and prints out the hand properties, IDs for associated fingers and tools, and the motion data for each hand.</p>
<pre class="code js literal-block">
<span class="c1">// Display Hand object data
</span><span class="kd">var</span> <span class="nx">handString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">hands</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">hands</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hand</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">hands</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

    <span class="nx">handString</span> <span class="o">+=</span> <span class="s2">&quot;Hand ID: &quot;</span> <span class="o">+</span> <span class="nx">hand</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="nx">handString</span> <span class="o">+=</span> <span class="s2">&quot;Direction: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">hand</span><span class="p">.</span><span class="nx">direction</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="nx">handString</span> <span class="o">+=</span> <span class="s2">&quot;Palm normal: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">hand</span><span class="p">.</span><span class="nx">palmNormal</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="nx">handString</span> <span class="o">+=</span> <span class="s2">&quot;Palm position: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">hand</span><span class="p">.</span><span class="nx">palmPosition</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="nx">handString</span> <span class="o">+=</span> <span class="s2">&quot;Palm velocity: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">hand</span><span class="p">.</span><span class="nx">palmVelocity</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm/s&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="nx">handString</span> <span class="o">+=</span> <span class="s2">&quot;Sphere center: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">hand</span><span class="p">.</span><span class="nx">sphereCenter</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="nx">handString</span> <span class="o">+=</span> <span class="s2">&quot;Sphere radius: &quot;</span> <span class="o">+</span> <span class="nx">hand</span><span class="p">.</span><span class="nx">sphereRadius</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm&lt;br /&gt;&quot;</span><span class="p">;</span>

    <span class="c1">// And so on...
</span>  <span class="p">}</span>
<span class="p">}</span>
</pre>
</div>
<div class="section" id="finger-and-tool-data">
<h2><a class="toc-backref" href="#id9">Finger and Tool data</a></h2>
<p>Fingers and tools are represented by Pointable objects in the JavaScript API. (You can use the Pointable.tool property to tell which type an object represents.) The Frame object provides a <tt class="docutils literal">pointables</tt> property, which is an array containing all the fingers and tools detected in that frame. Hand objects also contain a <tt class="docutils literal">pointables</tt> list, which contains only the pointable objects associated with that hand.</p>
<pre class="code js literal-block">
<span class="c1">// Display Pointable (finger and tool) object data
</span><span class="kd">var</span> <span class="nx">pointableString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">pointables</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">pointables</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">pointable</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">pointables</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

    <span class="nx">pointableString</span> <span class="o">+=</span> <span class="s2">&quot;Pointable ID: &quot;</span> <span class="o">+</span> <span class="nx">pointable</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="nx">pointableString</span> <span class="o">+=</span> <span class="s2">&quot;Belongs to hand with ID: &quot;</span> <span class="o">+</span> <span class="nx">pointable</span><span class="p">.</span><span class="nx">handId</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">pointable</span><span class="p">.</span><span class="nx">tool</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">pointableString</span> <span class="o">+=</span> <span class="s2">&quot;Classified as a tool &lt;br /&gt;&quot;</span><span class="p">;</span>
      <span class="nx">pointableString</span> <span class="o">+=</span> <span class="s2">&quot;Length: &quot;</span> <span class="o">+</span> <span class="nx">pointable</span><span class="p">.</span><span class="nx">length</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm&lt;br /&gt;&quot;</span><span class="p">;</span>
      <span class="nx">pointableString</span> <span class="o">+=</span> <span class="s2">&quot;Width: &quot;</span>  <span class="o">+</span> <span class="nx">pointable</span><span class="p">.</span><span class="nx">width</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">pointableString</span> <span class="o">+=</span> <span class="s2">&quot;Classified as a finger&lt;br /&gt;&quot;</span><span class="p">;</span>
      <span class="nx">pointableString</span> <span class="o">+=</span> <span class="s2">&quot;Length: &quot;</span> <span class="o">+</span> <span class="nx">pointable</span><span class="p">.</span><span class="nx">length</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">pointableString</span> <span class="o">+=</span> <span class="s2">&quot;Direction: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">pointable</span><span class="p">.</span><span class="nx">direction</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="nx">pointableString</span> <span class="o">+=</span> <span class="s2">&quot;Tip position: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">pointable</span><span class="p">.</span><span class="nx">tipPosition</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="nx">pointableString</span> <span class="o">+=</span> <span class="s2">&quot;Tip velocity: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">pointable</span><span class="p">.</span><span class="nx">tipVelocity</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm/s&lt;br /&gt;&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre>
</div>
<div class="section" id="gesture-data">
<h2><a class="toc-backref" href="#id10">Gesture data</a></h2>
<p>To receive gestures from the Leap, you first have to enable gesture recognition. Enable gestures when you call the Leap.loop() function by passing in an options object:</p>
<pre class="code js literal-block">
<span class="c1">// Setup Leap loop with frame callback function
</span><span class="kd">var</span> <span class="nx">controllerOptions</span> <span class="o">=</span> <span class="p">{</span><span class="nx">enableGestures</span><span class="o">:</span> <span class="kc">true</span><span class="p">};</span>

<span class="nx">Leap</span><span class="p">.</span><span class="nx">loop</span><span class="p">(</span><span class="nx">controllerOptions</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Body of callback function
</span><span class="p">})</span>
</pre>
<p>The Leap adds Gesture objects representing each recognized movement pattern to the gestures list in the Frame object. The sample application loops through the gesture list and prints information about each one to the standard output. This operation is performed with a standard for-loop and switch statement.</p>
<p>The full code for the gesture loop is:</p>
<pre class="code js literal-block">
<span class="c1">// Display Gesture object data
</span><span class="kd">var</span> <span class="nx">gestureString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gestures</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">gestures</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">gesture</span> <span class="o">=</span> <span class="nx">frame</span><span class="p">.</span><span class="nx">gestures</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="nx">gestureString</span> <span class="o">+=</span> <span class="s2">&quot;Gesture ID: &quot;</span> <span class="o">+</span> <span class="nx">gesture</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span>
                  <span class="o">+</span> <span class="s2">&quot;type: &quot;</span> <span class="o">+</span> <span class="nx">gesture</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span>
                  <span class="o">+</span> <span class="s2">&quot;state: &quot;</span> <span class="o">+</span> <span class="nx">gesture</span><span class="p">.</span><span class="nx">state</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span>
                  <span class="o">+</span> <span class="s2">&quot;hand IDs: &quot;</span> <span class="o">+</span> <span class="nx">gesture</span><span class="p">.</span><span class="nx">handIds</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span>
                  <span class="o">+</span> <span class="s2">&quot;pointable IDs: &quot;</span> <span class="o">+</span> <span class="nx">gesture</span><span class="p">.</span><span class="nx">pointableIds</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span>
                  <span class="o">+</span> <span class="s2">&quot;duration: &quot;</span> <span class="o">+</span> <span class="nx">gesture</span><span class="p">.</span><span class="nx">duration</span> <span class="o">+</span> <span class="s2">&quot; &amp;micro;s, &quot;</span><span class="p">;</span>

    <span class="k">switch</span> <span class="p">(</span><span class="nx">gesture</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s2">&quot;circle&quot;</span><span class="o">:</span>
        <span class="nx">gestureString</span> <span class="o">+=</span> <span class="s2">&quot;center: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">gesture</span><span class="p">.</span><span class="nx">center</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm, &quot;</span>
                      <span class="o">+</span> <span class="s2">&quot;normal: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">gesture</span><span class="p">.</span><span class="nx">normal</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span>
                      <span class="o">+</span> <span class="s2">&quot;radius: &quot;</span> <span class="o">+</span> <span class="nx">gesture</span><span class="p">.</span><span class="nx">radius</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm, &quot;</span>
                      <span class="o">+</span> <span class="s2">&quot;progress: &quot;</span> <span class="o">+</span> <span class="nx">gesture</span><span class="p">.</span><span class="nx">progress</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; rotations&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s2">&quot;swipe&quot;</span><span class="o">:</span>
        <span class="nx">gestureString</span> <span class="o">+=</span> <span class="s2">&quot;start position: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">gesture</span><span class="p">.</span><span class="nx">startPosition</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm, &quot;</span>
                      <span class="o">+</span> <span class="s2">&quot;current position: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">gesture</span><span class="p">.</span><span class="nx">position</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm, &quot;</span>
                      <span class="o">+</span> <span class="s2">&quot;direction: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">gesture</span><span class="p">.</span><span class="nx">direction</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span>
                      <span class="o">+</span> <span class="s2">&quot;speed: &quot;</span> <span class="o">+</span> <span class="nx">gesture</span><span class="p">.</span><span class="nx">speed</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm/s&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s2">&quot;screenTap&quot;</span><span class="o">:</span>
      <span class="k">case</span> <span class="s2">&quot;keyTap&quot;</span><span class="o">:</span>
        <span class="nx">gestureString</span> <span class="o">+=</span> <span class="s2">&quot;position: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">gesture</span><span class="p">.</span><span class="nx">position</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; mm, &quot;</span>
                      <span class="o">+</span> <span class="s2">&quot;direction: &quot;</span> <span class="o">+</span> <span class="nx">vectorToString</span><span class="p">(</span><span class="nx">gesture</span><span class="p">.</span><span class="nx">direction</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">default</span><span class="o">:</span>
        <span class="nx">gestureString</span> <span class="o">+=</span> <span class="s2">&quot;unkown gesture type&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">gestureString</span> <span class="o">+=</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre>
</div>
</div>
<div class="section" id="running-the-sample">
<h1><a class="toc-backref" href="#id11">Running the sample</a></h1>
<p>To run the sample application:</p>
<ol class="arabic simple">
<li>Plug the Leap device into a USB port and place it in front of you.</li>
<li>If you haven’t already, install the Leap software.</li>
<li>Start the Leap application. If you haven’t already, enter your registered email address and password when prompted. The Leap icon appears in the notification area of the task bar (on Windows) or finder bar (on Mac) and turns green when ready.</li>
<li>Open Sample.html in a browser that supports WebSockets.</li>
</ol>
<p>When you place a hand above the Leap, you should see the Frame, Hand, and Finger information printed out on the page. When you make a gesture, you should also see the appropriate Gesture information.</p>
<p>Now that you have seen how to access motion tracking data from the Leap, you can begin developing your own JavaScript applications that integrate the Leap.</p>
<hr class="docutils" />
<p>Copyright © 2012-2013 Leap Motion, Inc. All rights reserved.</p>
<p>Leap Motion proprietary and confidential. Not for distribution. Use subject to the terms of the Leap Motion SDK Agreement available at <a class="reference external" href="https://developer.leapmotion.com/sdk_agreement">https://developer.leapmotion.com/sdk_agreement</a>, or another agreement between Leap Motion and you, your company or other organization.</p>
</div>
</div>
</body>
</html>
