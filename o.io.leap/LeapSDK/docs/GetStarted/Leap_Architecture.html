<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.9.1: http://docutils.sourceforge.net/" />
<title>Leap Motion Architecture</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7434 2012-05-11 21:06:27Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { /* line numbers */
  color: grey;
}

.code {
  background-color: #eeeeee
}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="leap-motion-architecture">
<h1 class="title">Leap Motion Architecture</h1>

<p>The Leap Motion Controller supports most popular desktop operating systems. The Leap Motion software runs as a service (on Windows) or daemon (on Mac and Linux). The software connects to the Leap Motion Controller device over the USB bus. Leap-enabled applications access the Leap Motion service to receive motion tracking data. The Leap Motion SDK provides two varieties of API for getting the Leap Motion data: a native interface and a WebSocket interface. These APIs enable you to create Leap-enabled applications in several programming languages including JavaScript running in a browser environment.</p>
<p><em>Note:</em> The Leap Motion service/daemon communicates with applications using the TCP port: 127.0.0.1:5905. This address and port must not be blocked by a firewall or other program.</p>
<div class="contents topic" id="topics">
<p class="topic-title first">Topics:</p>
<ul class="simple">
<li><a class="reference internal" href="#application-programming-interfaces" id="id2">Application Programming Interfaces</a><ul>
<li><a class="reference internal" href="#leap-motion-application-interface" id="id3">Leap Motion Application Interface</a></li>
<li><a class="reference internal" href="#leap-motion-websocket-interface" id="id4">Leap Motion WebSocket Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#programming-language-support" id="id5">Programming Language Support</a><ul>
<li><a class="reference internal" href="#c" id="id6">C++</a></li>
<li><a class="reference internal" href="#objective-c" id="id7">Objective-C</a></li>
<li><a class="reference internal" href="#id1" id="id8">C#</a></li>
<li><a class="reference internal" href="#java" id="id9">Java</a></li>
<li><a class="reference internal" href="#python" id="id10">Python</a></li>
<li><a class="reference internal" href="#javascript" id="id11">JavaScript</a></li>
<li><a class="reference internal" href="#other-languages" id="id12">Other Languages</a></li>
</ul>
</li>
<li><a class="reference internal" href="#operating-system-support" id="id13">Operating System Support</a></li>
</ul>
</div>
<div class="section" id="application-programming-interfaces">
<h1><a class="toc-backref" href="#id2">Application Programming Interfaces</a></h1>
<p>The Leap Motion SDK provides two varieties of API to get tracking data from the Leap Motion service: a native interface and a WebSocket interface. The native interface is a dynamic library that you can use to create new, Leap-enabled applications. The WebSocket interface and JavaScript client library allow you to create Leap-enabled web applications.</p>
<!-- [This sentence belongs in the paragraph above when the plug-ins are in] The plug-in interface is a separate API that allows you to customize the Leap Motion OS-level input emulation for an existing application. -->
<div class="section" id="leap-motion-application-interface">
<h2><a class="toc-backref" href="#id3">Leap Motion Application Interface</a></h2>
<p>The application interface is provided through a dynamically loaded library. This library connects to the Leap Motion service and provides tracking data to your application. You can link to the library directly in C++ and Objective-C applications, or through one of the language bindings provided for Java, C#, and Python.</p>
<div class="figure">
<img alt="../Common/images/Arch_OS_Level_Diagram.png" src="../Common/images/Arch_OS_Level_Diagram.png" />
<p class="caption">Leap-enabled applications</p>
</div>
<ol class="arabic simple">
<li>The Leap Motion service receives data from the Leap Motion Controller over the USB bus. It processes that information and sends it to running Leap-enabled applications. By default, the service only sends tracking data to the foreground application. However, applications can request that they receive data in the background (a request that can be denied by the user).</li>
<li>The Leap Motion application runs separately from the service and allows the computer user to configure their Leap Motion installation. The Leap Motion application is a Control Panel applet on Windows and a Menu Bar application on Mac OS X.</li>
<li>The foreground Leap-enabled application receives motion tracking data from the service. A Leap-enabled application can connect to the Leap Motion service using the Leap Motion native library. Your application can link against the Leap Motion native library either directly (C++ and Objective-C) or through one of the available language wrapper libraries (Java, C#, and Python).</li>
<li>When a Leap-enabled application loses the operating system focus, the Leap Motion service stops sending data to it. Applications intended to work in the background can request permission to receive data even when in the background. When in the background, the configuration settings are determined by the foreground application.</li>
</ol>
<!-- Commented out for now: -->
<!-- Leap Motion Plug-in Interface -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- If you have an existing application that you do not want to reprogram and rebuild to use the Leap Motion application API, you can create a plug-in using the Leap Motion plug-in interface. By default, the Leap Motion software emulates operating system input events so that the Leap Motion controller can be used with "legacy" applications. This emulation translates motions and gestures into mouse and touch events appropriate for the current operating system. A Leap Motion plug-in allows you to customize the emulation of operating system input events for your specific application. -->
<!-- A Leap Motion plug-in is a special application that is registered with the Leap Motion plug-in host on a computer. Each plug-in is associated with another application and the Leap Motion plug-in host activates a plug-in when that application has the operating system focus.  The plug-in receives motion tracking data from the Leap Motion service, which it can translate into emulated "legacy" mouse and touch events expected by the application. Plug-ins can be created by the application developer or a third party. -->
<!-- .. figure:: ../Common/images/Arch_OS_Plugin_Diagram.png -->
<!-- Leap Motion plug-ins -->
<!-- 1. The Leap Motion plug-in host activates a plug-in when the associated application has focus. -->
<!-- 2. The active plug-in receives motion tracking data from the Leap Motion service. -->
<!-- 3.  The plug-in can process the detected hand positions and motion and send input emulation messages, such as mouse down, mouse move, and mouse up, back to the Leap Motion plug-in host. -->
<!-- 4. The Leap Motion plug-in host then sends the emulation commands to the operating system. The operating system dispatches OS-level input events. -->
<!-- 5. The legacy application receives input in the form of normal mouse and touch events. -->
<!-- Leap Motion plug-in API is provided through a dynamically loaded library and associated C++ header file. Bindings for other programming languages are not provided. -->
</div>
<div class="section" id="leap-motion-websocket-interface">
<h2><a class="toc-backref" href="#id4">Leap Motion WebSocket Interface</a></h2>
<p>The Leap Motion service runs a WebSocket server on the localhost domain at port 6437. The WebSocket interface provides tracking data in the form of JSON messages. A JavaScript client library is available that consumes the JSON messages and presents the tracking data as regular JavaScript objects.</p>
<div class="figure">
<img alt="../Common/images/Arch_WebSocket_Diagram.png" src="../Common/images/Arch_WebSocket_Diagram.png" />
<p class="caption">Leap-enabled web applications</p>
</div>
<ol class="arabic simple">
<li>The Leap Motion service provides a WebSocket server listening on <a class="reference external" href="http://127.0.0.1:6437">http://127.0.0.1:6437</a>.</li>
<li>The Leap Motion control panel allows end users to enable or disble the WebSocket server.</li>
<li>The server sends tracking data in the form of JSON messages. An application can send configuration messages back to the server.</li>
<li>The <cite>leap.js</cite> client JavaScript library should be used in web applications. The library establishes the connection to the server and consumes the JSON messages. The API presented by the JavaScript library is similar in philosophy and structure to the native API.</li>
</ol>
<p>This interface is intended primarily for web applications, but any application that can establish a WebSocket connection can use it. The server conforms to <a class="reference external" href="http://tools.ietf.org/html/rfc6455">RFC6455</a>.</p>
</div>
</div>
<div class="section" id="programming-language-support">
<h1><a class="toc-backref" href="#id5">Programming Language Support</a></h1>
<p>The Leap Motion library is written in C++. Leap Motion also uses SWIG, an open source tool, to generate language bindings for C#, Java, and Python. The SWIG-generated bindings translate calls written in the bound programming language to calls into the base C++ Leap Motion library. Each SWIG binding uses two additional libraries. For JavaScript and web application development, Leap Motion provides a WebSocket server and a client-side JavaScript library.</p>
<p>All the library, code, and header files required to develop Leap-enabled applications and plug-ins are included in the Leap Motion SDK, except the <cite>leap.js</cite> client JavaScript library. You can download the Leap Motion SDK from the Leap Motion Developer Portal. An SDK package is available for each supported operating system. The JavaScript client library is is distributed separately and can be downloaded from the <a class="reference external" href="https://github.com/leapmotion/leapjs">LeapJS GitHub repository</a></p>
<div class="section" id="c">
<h2><a class="toc-backref" href="#id6">C++</a></h2>
<p>To develop for the Leap Motion Controller in C++, include the API header files in your program and link with the Leap Motion library, either libLeap.dylib, Leap.dll, or libLeap.so, depending on platform.</p>
</div>
<div class="section" id="objective-c">
<h2><a class="toc-backref" href="#id7">Objective-C</a></h2>
<p>Objective-C applications are supported by hand-written wrapper code. To build a Leap-enabled Objective-C application, include the wrapper header and Objective-C++ code file in your application along with the Leap Motion C++ headers. You can then use the classes defined in the wrapper in (otherwise) pure Objective-C applications. Link your application with libLeap.dylib and include the library in your application package.</p>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#id8">C#</a></h2>
<p>The C# class definitions are provided for .NET 3.5 and .NET 4.0 in separate libraries. Your code can reference either LeapCSharp.NET3.5.dll or LeapCSharp.NET4.0.dll (the same library names are used for this library on all supported operating systems). These libraries load libCSharp.dylib (Mac), LeapCSharp.dll (Windows), or libLeapCSharp.so (Linux). The intermediate libraries load libLeap.dylib, Leap.dll, or libLeap.so (depending on platform).</p>
<p>Use the .NET 3.5 libraries with the Unity 3D game development system. The Leap Motion SDK provides a Unity plugin for use with the &quot;Pro&quot; version of the Unity editor. See this knowledgebase article for information on developing Leap-enabled applications with versions of the Unity editor that do not support plug-ins.</p>
</div>
<div class="section" id="java">
<h2><a class="toc-backref" href="#id9">Java</a></h2>
<p>Leap.jar contains the Leap Motion Java classes. This code loads libLeapJava.dylib (Mac), LeapJava.dll (Windows), or libLeapJava.so (Linux). These libraries contain the native code that translates the Java calls to the base Leap Motion API in libLeap.dylib, Leap.dll, or libLeap.so (depending on platform). The base Leap Motion dynamic library is loaded by the intermediate library.</p>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="#id10">Python</a></h2>
<p>Leap.py contains the Python module that you reference in your Python application. This module loads LeapPython.so (Mac and Linux) or LeapPython.dll (Windows). These libraries load  libLeap.dylib, Leap.dll, or libLeap.so (depending on platform).</p>
</div>
<div class="section" id="javascript">
<h2><a class="toc-backref" href="#id11">JavaScript</a></h2>
<p>Leap Motion JavaScript support has two main components. The first component is the WebSocket server provided by the Leap Motion service. This server allows web applications (or any application that can connect to a WebSocket) to access Leap Motion tracking data as JSON-formatted messages. The second component is the JavaScript client library, Leap.js. Leap.js is an open-source JavaScript API that consumes the WebSocket JSON output and presents it in a form that is consistent in philosophy and structure to the native Leap Motion API.</p>
</div>
<div class="section" id="other-languages">
<h2><a class="toc-backref" href="#id12">Other Languages</a></h2>
<p>Many community-created language bindings are available, for a partial list, visit: <a class="reference external" href="https://developer.leapmotion.com/links">Links and Libraries</a>.</p>
</div>
</div>
<div class="section" id="operating-system-support">
<h1><a class="toc-backref" href="#id13">Operating System Support</a></h1>
<p>The Leap Motion software currently supports OS X 10.6+ and Windows 7+. There is also an experimental, alpha-quality Linux build available only for developers.</p>
</div>
</div>
</body>
</html>
