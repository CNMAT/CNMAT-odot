<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.9.1: http://docutils.sourceforge.net/" />
<title>Setting up a Unity project</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7434 2012-05-11 21:06:27Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { /* line numbers */
  color: grey;
}

.code {
  background-color: #eeeeee
}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="setting-up-a-unity-project">
<h1 class="title">Setting up a Unity project</h1>

<p>You can use the Leap Motion SDK as a Unity plug-in to access Leap Motion tracking data in a Unity application. This article describes how to use the plug-in mechanism supported by the <em>Pro</em> version of Unity. To use the  standard version of Unity, which does not support native library plug-ins, please see, <a class="reference external" href="https://developer.leapmotion.com/articles/creating-leap-apps-with-unity-standard-license">Creating Leap Motion apps with Unity (standard license)</a>.</p>
<div class="contents topic" id="topics">
<p class="topic-title first">Topics:</p>
<ul class="simple">
<li><a class="reference internal" href="#leap-motion-c-libraries-for-unity" id="id1">Leap Motion C# Libraries for Unity</a></li>
<li><a class="reference internal" href="#create-a-project" id="id2">Create a project</a></li>
<li><a class="reference internal" href="#accessing-the-leap-motion-api" id="id3">Accessing the Leap Motion API</a></li>
<li><a class="reference internal" href="#building-64-bit-windows-unity-applications" id="id4">Building 64-bit Windows Unity applications</a></li>
<li><a class="reference internal" href="#exiting-cleanly-on-windows-with-unity3d-3-5" id="id5">Exiting cleanly on Windows with Unity3D 3.5</a></li>
</ul>
</div>
<div class="section" id="leap-motion-c-libraries-for-unity">
<h1><a class="toc-backref" href="#id1">Leap Motion C# Libraries for Unity</a></h1>
<p>The Leap Motion SDK includes several versions of the native libraries to match the platform and architecture of your application's build targets.</p>
<p>To use the Leap Motion SDK in the Unity editor, you must add the 32-bit libraries to your application's Plugins folder. On the Mac, both 32-bit and 64-bit libraries are included in one file. However, on Windows, only one architecture can be included in a library file, so you must be sure to use the correct files.</p>
<p>Use the following libraries in Unity:</p>
<ul>
<li><p class="first">32-bit Windows:</p>
<ul class="simple">
<li><tt class="docutils literal">LeapSDK/lib/UnityAssets/Plugins/LeapCSharp.NET3.5.dll</tt> — Leap Motion C# library for .NET 3.5</li>
<li><tt class="docutils literal">LeapSDK/lib/UnityAssets/Plugins/LeapCSharp.dll</tt> — 32-bit Leap Motion C# library for Windows</li>
<li><tt class="docutils literal">LeapSDK/lib/UnityAssets/Plugins/Leap.dll</tt> — 32-bit Leap Motion library for Windows</li>
</ul>
</li>
<li><p class="first">64-bit Windows:</p>
<ul class="simple">
<li><tt class="docutils literal">LeapSDK/lib/UnityAssets/Plugins/LeapCSharp.NET3.5.dll</tt> — Leap Motion C# library for .NET 3.5</li>
<li><tt class="docutils literal">LeapSDK/lib/x64/LeapCSharp.dll</tt> — 64-bit Leap Motion C# library for Windows</li>
<li><tt class="docutils literal">LeapSDK/lib/x64/Leap.dll</tt> — 64-bit Leap Motion library for Windows</li>
</ul>
<p><em>Note: Do not use the 64-bit libraries in the Unity editor on Windows.</em></p>
</li>
<li><p class="first">32- and 64-bit Mac OS:</p>
<ul class="simple">
<li><tt class="docutils literal">LeapSDK/lib/UnityAssets/Plugins/LeapCSharp.NET3.5.dll</tt> — Leap Motion C# library for .NET 3.5</li>
<li><tt class="docutils literal">LeapSDK/lib/UnityAssets/Plugins/LeapCSharp.bundle</tt> — Leap Motion C# bundle for Unity</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="create-a-project">
<h1><a class="toc-backref" href="#id2">Create a project</a></h1>
<p>First, create a new Unity project in the usual way, i.e.:</p>
<ol class="arabic simple">
<li>Open the Unity editor.</li>
<li>Select <em>File &gt; New Project...</em></li>
<li>Choose a name and save location.</li>
<li>Click <em>Create Project</em>.</li>
</ol>
<p>Then, add the Leap Motion libraries to the project:</p>
<ol class="arabic simple">
<li>Navigate to the Assets folder inside your Unity project directory.</li>
<li>Copy the entire <tt class="docutils literal">Plugins</tt> folder from the Leap Motion SDK <tt class="docutils literal">lib/UnityAssets</tt> folder into your Unity project <tt class="docutils literal">Assets</tt> folder.</li>
</ol>
<p>Note, you can place the libraries from both the Mac and the Windows SDK into your Plugins folder to enable cross-platform builds. However, see <a class="reference internal" href="#building-64-bit-windows-unity-applications">Building 64-bit Windows Unity applications</a> for considerations when building for the x86 versus the x64 Windows platforms.</p>
</div>
<div class="section" id="accessing-the-leap-motion-api">
<h1><a class="toc-backref" href="#id3">Accessing the Leap Motion API</a></h1>
<p>With the Leap Motion libraries in the Plugins folder, you can add script assets that use the API. The Leap Motion classes are defined in the <tt class="docutils literal">Leap</tt> namespace. A basic MonoBehavior class that accesses the Leap Motion API will look something like the following:</p>
<pre class="code csharp literal-block">
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Leap</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">LeapBehavior</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
    <span class="n">Controller</span> <span class="n">controller</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">controller</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Controller</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Update</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Frame</span> <span class="n">frame</span> <span class="p">=</span> <span class="n">controller</span><span class="p">.</span><span class="n">Frame</span><span class="p">();</span>
        <span class="c1">// do something with the tracking data in the frame...
</span>    <span class="p">}</span>
<span class="p">}</span>
</pre>
<p>Note that this example does not use a <tt class="docutils literal">Leap.Listener</tt> subclass. Since a Unity application has a natural frame rate, the <tt class="docutils literal">Update()</tt> function can get the current frame of data from the Leap Motion controller when the function is called by the Unity engine.</p>
<p><em>Note: Using the Listener mechanism can cause the Unity editor and Unity applications to freeze on exit on Windows. This is due to a threading issue that can occur when using callbacks between managed and unmanaged code in Unity. See `Exiting cleanly on Windows with Unity3D 3.5`_ for a workaround.</em></p>
</div>
<div class="section" id="building-64-bit-windows-unity-applications">
<h1><a class="toc-backref" href="#id4">Building 64-bit Windows Unity applications</a></h1>
<p>When you build a Leap-enabled application with Unity, the Unity editor copies the Leap Motion libraries from your Plugins folders automatically. You can even put a set of both Windows x86 and Mac OS Leap Motion libraries in the Plugins folder to enable cross-platform builds from either platform. However, the Leap Motion x86 libraries cannot coexist with the Leap Motion x64 libraries in the Plugins folder.</p>
<p>On Windows, the Unity editor requires that the Plugins folder contains the 32-bit (x86 platform) libraries in order to run your application during development. If you make a build for the x64 platform, Unity copies these 32-bit libraries to the application's output data folder. Before running your 64-bit application you must replace the 32-bit Leap Motion libraries with the 64-bit versions from the <tt class="docutils literal">lib/x64</tt> folder of the Leap Motion SDK.</p>
<p>On Mac, you can place either the 32-bit Windows Leap Motion libraries or the 64-bit Windows libraries in your Plugins folder, but not both. If you want to build for both Windows platforms on the Mac, you must make sure to use the correct version of the Leap Motion libraries. You can do this by copying the correct libraries into the application's output data folder after building your application.</p>
</div>
<div class="section" id="exiting-cleanly-on-windows-with-unity3d-3-5">
<h1><a class="toc-backref" href="#id5">Exiting cleanly on Windows with Unity3D 3.5</a></h1>
<p>Because of a problem with the way that Mono closes threads during application shutdown, the Unity3D editor and Leap-enabled applications can hang on exit. This issue affects Windows computers only and does not occur in Unity 4, which uses a different version of Mono. This issue also only occurs if you use the Leap Motion Listener method of handling Leap Motion events.</p>
<p>To avoid hanging on exit, add the following code to your application:</p>
<pre class="code csharp literal-block">
<span class="cp">#if UNITY_STANDALONE_WIN
</span><span class="na">  [DllImport(&quot;mono&quot;, SetLastError=true)]</span>
  <span class="k">static</span> <span class="k">extern</span> <span class="k">void</span> <span class="nf">mono_thread_exit</span><span class="p">();</span>
<span class="cp">#endif
</span>
  <span class="k">void</span> <span class="nf">OnApplicationQuit</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">controller</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
    <span class="n">listener</span><span class="p">.</span><span class="n">Dispose</span><span class="p">();</span>
<span class="cp">#if UNITY_STANDALONE_WIN &amp;&amp; !UNITY_EDITOR &amp;&amp; UNITY_3_5
</span>    <span class="n">mono_thread_exit</span> <span class="p">();</span>
<span class="cp">#endif</span>
</pre>
<p>When using this code snippet, <tt class="docutils literal">controller</tt> must be a reference to your Leap.Controller object and ''listener`` must be a reference to your Leap.Listener subclass.</p>
<hr class="docutils" />
<p>Copyright © 2012-2013 Leap Motion, Inc. All rights reserved.</p>
<p>Leap Motion proprietary and confidential. Not for distribution. Use subject to the terms of the Leap Motion SDK Agreement available at <a class="reference external" href="https://developer.leapmotion.com/sdk_agreement">https://developer.leapmotion.com/sdk_agreement</a>, or another agreement between Leap Motion and you, your company or other organization.</p>
</div>
</div>
</body>
</html>
