<!-- /* * * *
      * O.FLATTEN & O.EXPLODE // Node-Red Module
      *
      * Written by Ilya Rostovtsev The Center for New Music and Audio Technologies,
      * University of California, Berkeley.  Copyright (c) 2014-ll, The Regents of
      * the University of California (Regents). 
      *
      * Permission to use, copy, modify, distribute, and distribute modified versions
      * of this software and its documentation without fee and without a signed
      * licensing agreement, is hereby granted, provided that the above copyright
      * notice, this paragraph and the following two paragraphs appear in all copies,
      * modifications, and distributions.
      *
      * IN NO EVENT SHALL REGENTS BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,
      * SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS, ARISING
      * OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF REGENTS HAS
      * BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      * 
      * REGENTS SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
      * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
      * PURPOSE. THE SOFTWARE AND ACCOMPANYING DOCUMENTATION, IF ANY, PROVIDED
      * HEREUNDER IS PROVIDED "AS IS". REGENTS HAS NO OBLIGATION TO PROVIDE
      * MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
      * * * * -->

<!-- o_flatten node -->
<script type="text/x-red" data-template-name="o_flatten">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="o_flatten">
    <p>Takes messages out of nested bundles and inserts them into the top level bundle.</p>
    <h5>Example:</h5>
    <p> Given the bundle:
    <pre>/foo [
   /bar 10
]</pre>
    Will produce:
    <pre>/foo/bar 10</pre>
    </p>
    <p>INPUT: a <code>.payload</code> containing a NODEjs Buffer with a serialized OSC Bundle.</p>
    <p>OUTPUT: a <code>.payload</code> containing a NODEjs Buffer with a serialized flattened OSC Bundle.</p>
    <p><em>The square brackets notation is understood by the <code>o.parse</code> object for generating sub-bundles.</em></p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('o_flatten', {
        color:"#B0C6D9",
        category: 'function',   
        defaults: {             
            name: {value:"o.flatten"},   
            topic: {value:"", required:false}
        },
        inputs:1,               
        outputs:1,              
        icon: "cnmat.png",    
        label: function() {    
            return this.name||this.topic||"o.flatten";
        },
        labelStyle: function() { // sets the class to apply to the label
            return this.name?"node_label_italic":"";
        }
    });
</script>


<!-- o_explode node -->
<script type="text/x-red" data-template-name="o_explode">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="o_explode">
    <p>Explode address hierarchies into nested bundles.</p>
    <h5>Example:</h5>
    <p> Given the bundle:
    <pre>/foo/bar 10</pre>
    Will produce:
    <pre>/foo [
  /bar 10
]</pre>
    </p>
    <p>INPUT: a <code>.payload</code> containing a NODEjs Buffer with a serialized OSC Bundle.</p>
    <p>OUTPUT: a <code>.payload</code> containing a NODEjs Buffer with a serialized exploded OSC Bundle.</p>
    <p><em>The square brackets notation is understood by the <code>o.parse</code> object for generating sub-bundles.</em></p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('o_explode', {
        color:"#B0C6D9",
        category: 'function',   
        defaults: {             
            name: {value:"o.explode"},   
            topic: {value:"", required:false}
        },
        inputs:1,               
        outputs:1,              
        icon: "cnmat.png",    
        label: function() {    
            return this.name||this.topic||"o.explode";
        },
        labelStyle: function() { // sets the class to apply to the label
            return this.name?"node_label_italic":"";
        }
    });
</script>